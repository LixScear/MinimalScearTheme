/* ============================================
   STATUS INDICATOR HALO EFFECTS V2
   ============================================
   
   Custom halo effects around user profiles to indicate status:
   - Online: Green glow
   - Offline: Gray glow  
   - Idle: Yellow glow
   - Do Not Disturb: Red glow
   - Invisible: Purple glow
   
   Also hides original Discord status indicators
   
   ============================================ */

/* ============================================
   CSS VARIABLES FOR STATUS COLORS
   ============================================ */

   :root {
    /* Status halo colors */
    --status-online-halo: #43b581;
    --status-offline-halo: #747f8d;
    --status-idle-halo: #faa61a;
    --status-dnd-halo: #f04747;
    --status-invisible-halo: #747f8d;
    
    /* Halo intensity and size */
    --halo-blur: 8px;
    --halo-spread: 4px;
    --halo-opacity: 0.8;
    
    /* Animation properties */
    --halo-animation-duration: 2s;
}

/* ============================================
   TRANSFORM ORIGINAL DISCORD STATUS INDICATORS
   ============================================ */

/* Transform Discord's default status indicators into stroke borders */
.wrapper__44b0c rect,
.avatar__0a06e rect,
.avatar-2Vndt_ rect,
.avatar-2OC07D rect,
.avatar__1fed1 rect {
    /* Remove mask and ensure visibility */
    -webkit-mask: none;
    mask: none;
    display: block;
    
    /* Transparent fill with stroke */
    fill: transparent !important;
    stroke-width: 3px;
    
    /* Apply border radius */
    rx: 50%;
    ry: 50%;
}

/* Remove mask from foreign objects */
.wrapper__44b0c foreignObject,
.avatar__0a06e foreignObject,
.avatar-2Vndt_ foreignObject,
.avatar-2OC07D foreignObject,
.avatar__1fed1 foreignObject {
    -webkit-mask: none;
    mask: none;
}

/* Hide mask circle */
.wrapper__44b0c .mask__44b0c > circle,
.avatar__0a06e .mask__44b0c > circle,
.avatar-2Vndt_ .mask__44b0c > circle,
.avatar-2OC07D .mask__44b0c > circle,
.avatar__1fed1 .mask__44b0c > circle {
    opacity: 0 !important;
}

/* ============================================
   BASE HALO EFFECT STYLES
   ============================================ */

/* Apply halo to all status indicators */
.wrapper__44b0c,
.avatar__0a06e,
.avatar-2Vndt_,
.avatar-2OC07D,
.avatar__1fed1 {
    position: relative;
    transition: all 0.3s ease;
    /* Ensure profiles remain visible */
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* ============================================
   ONLINE STATUS HALO
   ============================================ */

/* Online status - Green halo and stroke */
.wrapper__44b0c[aria-label*="Online"],
.avatar__0a06e[aria-label*="Online"],
.avatar-2Vndt_[aria-label*="Online"],
.avatar-2OC07D[aria-label*="Online"],
.avatar__1fed1[aria-label*="Online"] {
    box-shadow: 
        0 0 var(--halo-blur) var(--halo-spread) rgba(67, 181, 129, var(--halo-opacity)),
        0 0 calc(var(--halo-blur) * 2) calc(var(--halo-spread) * 2) rgba(67, 181, 129, calc(var(--halo-opacity) * 0.5));
}

/* Online status stroke color */
.wrapper__44b0c[aria-label*="Online"] rect,
.avatar__0a06e[aria-label*="Online"] rect,
.avatar-2Vndt_[aria-label*="Online"] rect,
.avatar-2OC07D[aria-label*="Online"] rect,
.avatar__1fed1[aria-label*="Online"] rect {
    stroke: #43b581;
}

/* ============================================
   OFFLINE STATUS HALO
   ============================================ */

/* Offline status - Gray halo and stroke */
.wrapper__44b0c[aria-label*="Offline"],
.avatar__0a06e[aria-label*="Offline"],
.avatar-2Vndt_[aria-label*="Offline"],
.avatar-2OC07D[aria-label*="Offline"],
.avatar__1fed1[aria-label*="Offline"] {
    box-shadow: 
        0 0 var(--halo-blur) var(--halo-spread) rgba(116, 127, 141, calc(var(--halo-opacity) * 0.6)),
        0 0 calc(var(--halo-blur) * 2) calc(var(--halo-spread) * 2) rgba(116, 127, 141, calc(var(--halo-opacity) * 0.3));
}

/* Offline status stroke color */
.wrapper__44b0c[aria-label*="Offline"] rect,
.avatar__0a06e[aria-label*="Offline"] rect,
.avatar-2Vndt_[aria-label*="Offline"] rect,
.avatar-2OC07D[aria-label*="Offline"] rect,
.avatar__1fed1[aria-label*="Offline"] rect {
    stroke: #747f8d;
}

/* ============================================
   IDLE STATUS HALO
   ============================================ */

/* Idle status - Yellow halo and stroke */
.wrapper__44b0c[aria-label*="Idle"],
.avatar__0a06e[aria-label*="Idle"],
.avatar-2Vndt_[aria-label*="Idle"],
.avatar-2OC07D[aria-label*="Idle"],
.avatar__1fed1[aria-label*="Idle"] {
    box-shadow: 
        0 0 var(--halo-blur) var(--halo-spread) rgba(250, 166, 26, var(--halo-opacity)),
        0 0 calc(var(--halo-blur) * 2) calc(var(--halo-spread) * 2) rgba(250, 166, 26, calc(var(--halo-opacity) * 0.5));
}

/* Idle status stroke color */
.wrapper__44b0c[aria-label*="Idle"] rect,
.avatar__0a06e[aria-label*="Idle"] rect,
.avatar-2Vndt_[aria-label*="Idle"] rect,
.avatar-2OC07D[aria-label*="Idle"] rect,
.avatar__1fed1[aria-label*="Idle"] rect {
    stroke: #faa61a;
}

/* ============================================
   DO NOT DISTURB STATUS HALO
   ============================================ */

/* Do Not Disturb status - Red halo and stroke */
.wrapper__44b0c[aria-label*="Do Not Disturb"],
.avatar__0a06e[aria-label*="Do Not Disturb"],
.avatar-2Vndt_[aria-label*="Do Not Disturb"],
.avatar-2OC07D[aria-label*="Do Not Disturb"],
.avatar__1fed1[aria-label*="Do Not Disturb"] {
    box-shadow: 
        0 0 var(--halo-blur) var(--halo-spread) rgba(240, 71, 71, var(--halo-opacity)),
        0 0 calc(var(--halo-blur) * 2) calc(var(--halo-spread) * 2) rgba(240, 71, 71, calc(var(--halo-opacity) * 0.5));
}

/* Do Not Disturb status stroke color */
.wrapper__44b0c[aria-label*="Do Not Disturb"] rect,
.avatar__0a06e[aria-label*="Do Not Disturb"] rect,
.avatar-2Vndt_[aria-label*="Do Not Disturb"] rect,
.avatar-2OC07D[aria-label*="Do Not Disturb"] rect,
.avatar__1fed1[aria-label*="Do Not Disturb"] rect {
    stroke: #f04747;
}

/* ============================================
   INVISIBLE STATUS HALO
   ============================================ */

/* Invisible status - Purple halo and stroke */
.wrapper__44b0c[aria-label*="Invisible"],
.avatar__0a06e[aria-label*="Invisible"],
.avatar-2Vndt_[aria-label*="Invisible"],
.avatar-2OC07D[aria-label*="Invisible"],
.avatar__1fed1[aria-label*="Invisible"] {
    box-shadow: 
        0 0 var(--halo-blur) var(--halo-spread) rgba(116, 127, 141, calc(var(--halo-opacity) * 0.7)),
        0 0 calc(var(--halo-blur) * 2) calc(var(--halo-spread) * 2) rgba(116, 127, 141, calc(var(--halo-opacity) * 0.4));
}

/* Invisible status stroke color */
.wrapper__44b0c[aria-label*="Invisible"] rect,
.avatar__0a06e[aria-label*="Invisible"] rect,
.avatar-2Vndt_[aria-label*="Invisible"] rect,
.avatar-2OC07D[aria-label*="Invisible"] rect,
.avatar__1fed1[aria-label*="Invisible"] rect {
    stroke: #747f8d;
}

/* ============================================
   STREAMING STATUS HALO
   ============================================ */

/* Streaming status - Purple halo and stroke (enhanced) */
.wrapper__44b0c[aria-label*="Streaming"],
.avatar__0a06e[aria-label*="Streaming"],
.avatar-2Vndt_[aria-label*="Streaming"],
.avatar-2OC07D[aria-label*="Streaming"],
.avatar__1fed1[aria-label*="Streaming"] {
    box-shadow: 
        0 0 var(--halo-blur) var(--halo-spread) rgba(114, 137, 218, var(--halo-opacity)),
        0 0 calc(var(--halo-blur) * 2) calc(var(--halo-spread) * 2) rgba(114, 137, 218, calc(var(--halo-opacity) * 0.5));
}

/* Streaming status stroke color */
.wrapper__44b0c[aria-label*="Streaming"] rect,
.avatar__0a06e[aria-label*="Streaming"] rect,
.avatar-2Vndt_[aria-label*="Streaming"] rect,
.avatar-2OC07D[aria-label*="Streaming"] rect,
.avatar__1fed1[aria-label*="Streaming"] rect {
    stroke: #7289da;
}

/* ============================================
   HOVER EFFECTS
   ============================================ */

/* Enhanced halo on hover */
.wrapper__44b0c:hover,
.avatar__0a06e:hover,
.avatar-2Vndt_:hover,
.avatar-2OC07D:hover,
.avatar__1fed1:hover {
    transition: all 0.2s ease;
}

/* ============================================
   LIGHT THEME ADJUSTMENTS
   ============================================ */

/* Adjust halo opacity for light theme */
html.theme-light .wrapper__44b0c,
html.theme-light .avatar__0a06e,
html.theme-light .avatar-2Vndt_,
html.theme-light .avatar-2OC07D,
html.theme-light .avatar__1fed1 {
    --halo-opacity: 0.6;
}

/* ============================================
   ACCESSIBILITY & PERFORMANCE
   ============================================ */

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
    .wrapper__44b0c,
    .avatar__0a06e,
    .avatar-2Vndt_,
    .avatar-2OC07D,
    .avatar__1fed1 {
        transition: none;
    }
}

/* ============================================
   ENSURE STATUS INDICATORS WORK DURING TYPING
   ============================================ */

/* Ensure avatars remain visible during typing */
[class*="typing"] .wrapper__44b0c,
[class*="typing"] .avatar__0a06e,
[class*="typing"] .avatar-2Vndt_,
[class*="typing"] .avatar-2OC07D,
[class*="typing"] .avatar__1fed1 {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Ensure status rectangles work during typing */
[class*="typing"] .wrapper__44b0c rect,
[class*="typing"] .avatar__0a06e rect,
[class*="typing"] .avatar-2Vndt_ rect,
[class*="typing"] .avatar-2OC07D rect,
[class*="typing"] .avatar__1fed1 rect {
    fill: transparent !important;
    stroke-width: 3px;
    display: block !important;
}

/* ============================================
   CUSTOMIZATION VARIABLES
   ============================================ */

/* Users can override these variables to customize the halo effects */
:root {
    /* Customize halo intensity */
    --halo-blur: 8px;
    --halo-spread: 4px;
    --halo-opacity: 0.8;
    
    /* Customize animation speed */
    --halo-animation-duration: 2s;
    
    /* Customize colors (users can override these) */
    --status-online-halo: #43b581;
    --status-offline-halo: #747f8d;
    --status-idle-halo: #faa61a;
    --status-dnd-halo: #f04747;
    --status-invisible-halo: #747f8d;
    --status-streaming-halo: #7289da;
}
